<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-16">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <link rel="apple-touch-icon" sizes="180x180" href="./favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="./favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./favicon/favicon-16x16.png">
  <link rel="manifest" href="./favicon/manifest.json">
  <link rel="mask-icon" href="./favicon/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="theme-color" content="#ffffff">
  <!-- The above 6 tags are all for Favicon settings across the browsers -->
  <title>Nintendo Switch Controller Options Database</title>
  <meta name="description" content="A database for all compatible Nintendo Switch Controller Options for games released in North America. Allows users to see all Nintendo Switch Joy-Con or Pro Controller compatible games."/>
  <!-- Custom CSS File -->
  <link rel="stylesheet" href="./custom.css">
  <!-- CSS and Javascript for Datatables, JQuery, and Plugins (DATATABLES STYLE)-->
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/jq-2.2.4/dt-1.10.15/b-1.3.1/b-colvis-1.3.1/b-print-1.3.1/cr-1.3.3/fh-3.1.2/r-2.1.1/sc-1.4.2/se-1.2.2/datatables.min.css"/>
  <script type="text/javascript" src="https://cdn.datatables.net/v/dt/jq-2.2.4/dt-1.10.15/b-1.3.1/b-colvis-1.3.1/b-print-1.3.1/cr-1.3.3/fh-3.1.2/r-2.1.1/sc-1.4.2/se-1.2.2/datatables.min.js"></script>

 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>



  <!-- Moment Js DataTables Sorting -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.8.4/moment.min.js"></script>
  <script src="//cdn.datatables.net/plug-ins/1.10.12/sorting/datetime-moment.js"></script>
  <!-- Google Analytics Site Tracking Code -->
  <script>
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date(); a = s.createElement(o),
      m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-103229414-1', 'auto');
    ga('send', 'pageview');
  </script>
  <!-- CSS for Google Script Email Form -->
  <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.rawgit.com/dwyl/html-form-send-email-via-google-script-without-server/master/style.css">
</head>

<body style="margin: 1em; font-size: 14px;">
  <div class="conatiner" style="margin: 1vw">
    <!-- Current Header - Needs Updated -->
    <div class="row">
      <div class="col-2 col-sm-1 vcenter">
        <img src="./images/nintendo-switch.png" class="row-icon"></img>
      </div>
      <div class="col-10 col-sm-11 center">
        <h1 class="title">Nintendo Switch Controller Options Database</h1>
      </div>
    </div>
    <!-- End Current Header -->
      <!-- Custom Filtering Modal -->
      <div class="modal fade" id="FilteringModal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="FilteringModalTitle">Choose Your Filters:</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <input id="Docked" type="checkbox" value="false">Docked</input><br>
              <input id="Handheld" type="checkbox" value="false">Handheld</input><br>
              <input id="SingleJoycon" type="checkbox" value="false">Single Joycon</input><br>
              <input id="DoubleJoycons" type="checkbox" value="false">Double Joycons</input><br>
              <input id="ProController" type="checkbox" value="false">Pro Controller</input><br>
              <select id="ESRB" value="">
                <option value="">No Filter</option>
                <option value="E">E</option>
                <option value="E 10+">E 10+</option>
                <option value="T">T</option>
                <option value="M">M</option>
                <option value="RP">RP</option>
              </select> ESRB Rating <br>
              <input id="colorize" type="checkbox" value="false">Color Background of Cells</input><br>
              <input id="fontcolor" type="checkbox" value="true" checked>Color Font of Cells</input>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

    <div class="card well">
      <div id="table-container" style="background-color: default">
        <table id="games" class="display table-bordered" width="100%" style="background-color: default"> <!-- //rgba(0, 150, 203, 1) -->
          <thead style="vertical-align: middle">
            <th class="header-card">
              <span>
                <div>Title</div>
                <img src="./images/game.png" class="row-icon" alt="Title"></img>
              </span>
            </th>
            <th class="header-card">
              <span>
                <div>Release Date</div>
                <img src="./images/calendar.png" class="row-icon" alt="Release Date"></img>
              </span>
            </th>
            <th class="header-card">
              <span>
                <div>Docked Mode</div>
                <img src="./images/docked.png" class="row-icon" alt="Docked"></img>
              </span>
            </th>
            <th class="header-card">
              <span>
                <div>Handheld Mode</div>
                <img src="./images/handheld.png" class="row-icon" alt="Handheld"></img>
              </span>
            </th>
            <th class="header-card">
              <span>
                <div>Single Joy-Con</div>
                <img src="./images/singlejoycon.png" class="row-icon" alt="Single Joy-Con"></img>
              </span>
            </th>
            <th class="header-card">
              <span>
                <div>Joy-Con Set</div>
                <img src="./images/doublejoycon.png" class="row-icon" alt="Joy-Con Set"></img>
              </span>
            </th>
            <th class="header-card">
              <span>
                <div>Pro Controller</div>
                <img src="./images/procontroller.png" class="row-icon" alt="Pro Controller"></img>
              </span>
            </th>
            <th class="header-card">
              <span>
                <div>Local Play</div>
                <img src="./images/localplayer.png" class="row-icon" alt="Local Play"></img>
              </span>
            </th>
            <th class="header-card">
              <span>
                <div>Local Wireless</div>
                <img src="./images/localwireless.png" class="row-icon" alt="Local Wireless"></img>
              </span>
            </th>
            <th class="header-card">
              <span>
                <div>Online Multiplayer</div>
                <img src="./images/multiplayer.png" class="row-icon" alt="Online Multiplayer"></img>
              </span>
            </th>
            <th class="header-card">
              <span>
                <div>Publisher</div>
                <img src="./images/publisher.png" class="row-icon" alt="Publisher"></img>
              </span>
            </th>
            <th class="header-card">
              <span>
                <div>Developer</div>
                <img src="./images/developer.png" class="row-icon" alt="Developer"></img>
              </span>
            </th>
            <th class="header-card">
              <span>
                <div>Age Rating</div>
                <img src="./images/esrb.png" class="row-icon" alt="ESRB Rating"></img>
              </span>
            </th>
          </thead>
        </table>
      </div>
    </div>
    <!-- Feedback Form -->
    <div class="row justify-content-center">
    <div class="col-12 col-sm-8 well">
      <form id="gform" method="POST" class="pure-form pure-form-stacked" action="https://script.google.com/macros/s/AKfycbxPL0dkR3niwi5rhIXHTfM1_F7StIQlOTPQw40jmvDjRvyEgdA/exec">
        <h1 style="text-align: center">Provide Feedback to Improve Data</h1>
        <div class="pure-group row">
          <div class="col-12 col-sm-6">
            <label for="Title">Title: </label>
            <input id="Title" name="Title" placeholder="Breath of the Wild" style="width: 100%"/>
          </div>
          <div class="col-12 col-sm-6">
            <label for="Fixes">Proper Controller Sets: </label>
            <input id="Fixes" name="Fixes" placeholder="Ex: ProController Support!" style="width: 100%"/>
          </div>
        </div>
        <div class="pure-group row">
          <div class="col-6">
            <label for="email"><em>Your</em> Email Address:</label>
            <input id="email" name="email" type="email" value="" required placeholder="your.name@email.com"  style="width: 100%"/>
            <span id="email-invalid" style="display:none">Must be a valid email address</span>
          </div>
          <div class="col-6">
              <button class="button-success pure-button button-xlarge" style="float: right; margin-top: 25px; margin-bottom: 0px;">
                  <i class="fa fa-paper-plane"></i>&nbsp;Send
              </button>
          </div>
        </div>
      </form>
      <div style="display:none;" id="thankyou_message">
          <h2>Thanks for contacting us!
            <br>We will update the form soon!
          </h2>
      </div>
    </div>
  </div>

      <div class="row"></div>
      <div class="row">
        <div class="col-xs-12">
          <!-- Button trigger modal -->
          <button type="button" class="btn btn-primary" style="float: left" data-toggle="modal" data-target="#myModal">
            Like this site? Click here!
          </button>
        </div>
      </div>

      <!-- Modal -->
      <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Thanks for Viewing!</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <p>I sincerely appreciate you checking out my first passion project!
                Please feel free to visit my <a href="https://moosecreates.netlify.app/">personal site</a>
                and provide any feedback at <a href="mailto:mathewmoose95@gmail.com"> mathewmoose95@gmail.com</a>. Thanks!</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

    <!-- Submit the Form to Google Using "AJAX" -->
    <script data-cfasync="false" type="text/javascript" src="https://cdn.rawgit.com/dwyl/html-form-send-email-via-google-script-without-server/master/form-submission-handler.js"></script>
    <!-- End Feedback Form -->

    <script>
    //"fnCreatedCell": function (nTd, sData, oData, iRow, iCol) {
    //Table Cell Element, Data Read In, Object, Row #, Column #
    function colorCells(cellElement, cellData){
        if (cellData.includes("✔")){
          $(cellElement).addClass("goodData");
        }
        else if ((cellData == "X") || (cellData == "0")){
          $(cellElement).addClass("badData");
        }
        else if (cellData == "?"){
          $(cellElement).addClass("updateData");
        }
        else{
          $(cellElement).addClass("anyData");
        }
    }


      $.fn.dataTable.moment('DD/MM/YYYY'); // Format Used by SortDate Data
      var dataTables = $('#games').DataTable({
        "ajax": 'data.json',
        "dom": 'Bfrtip',
        buttons: [
          {
            className: '',
            extend: 'colvis',
            text: "Toggle Columns",
            columns: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]
          },
          {
            text: "Toggle Filters",
            action: function() {$("#FilteringModal").modal("toggle");}
          },
        ],
        responsive: true,
        colReorder: true,
        select: true,
        fixedHeader: true,
        paging: false,
        "columnDefs": [
          {"className": "dt-body-center","targets": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]},
        ],
        "columns": [
          { "data": "Title", // 0
           "render": function (data, type, row, meta) {
              return '<a href=' + row["URL"] + ' target="_blank">' + data + '</a>';} },
          { "data": "ReleaseDate", // 1
           "orderData": 13 },
          { "data": "Docked",
            "fnCreatedCell": function (nTd, sData) {colorCells(nTd, sData);}}, // 2
          { "data": "Handheld",
          "fnCreatedCell": function (nTd, sData) {colorCells(nTd, sData);}}, // 3
          { "data": "SingleJoycon",
          "fnCreatedCell": function (nTd, sData) {colorCells(nTd, sData);}}, // 4
          { "data": "DoubleJoycon",
          "fnCreatedCell": function (nTd, sData) {colorCells(nTd, sData);}}, // 5
          { "data": "ProController",
          "fnCreatedCell": function (nTd, sData) {colorCells(nTd, sData);}}, // 6
          { "data": "Local",
          "fnCreatedCell": function (nTd, sData) {colorCells(nTd, sData);}}, // 7
          { "data": "Wireless",
          "fnCreatedCell": function (nTd, sData) {colorCells(nTd, sData);}}, // 8
          { "data": "Multiplayer",
          "fnCreatedCell": function (nTd, sData) {colorCells(nTd, sData);}}, // 9
          { "data": "Publisher", // 10
            "visible": true,},
          { "data": "Developer", // 11
            "visible": true,},
          { "data": "Rating", // 12
            "visible": true,},
          { "data": "SortDate", // 13
            "visible": false,
            "searchable": false,
            "render": false}
        ]
      });

// ChangeLog read from the Server //
$.get('./changelog.txt', function(data) {
    if (data) {
        document.getElementById("changes").innerHTML = data;
    } else{
        document.getElementById("changes").innerHTML = "Unable to read changelog from server.";
    }
});

// Custom Filtering Button Triggers //
$('#Docked').on('click', function () {
  if( $("#Docked").prop('checked')){
    dataTables.columns(2).search("✔",true,false,true).draw();
  } else{
    dataTables.columns(2).search("").draw();
  }
});
$('#Handheld').on('click', function () {
  if( $("#Handheld").prop('checked')){
    dataTables.columns(3).search("✔",true,false,true).draw();
  } else{
    dataTables.columns(3).search("").draw();
  }
});
$('#SingleJoycon').on('click', function () {
  if( $("#SingleJoycon").prop('checked')){
    dataTables.columns(4).search("✔",true,false,true).draw();
  } else{
    dataTables.columns(4).search("").draw();
  }
});
$('#DoubleJoycons').on('click', function () {
  if( $("#DoubleJoycons").prop('checked')){
    dataTables.columns(5).search("✔",true,false,true).draw();
  } else{
    dataTables.columns(5).search("").draw();
  }
});
$('#ProController').on('click', function () {
  if( $("#ProController").prop('checked')){
    dataTables.columns(6).search("✔",true,false,true).draw();
  } else{
    dataTables.columns(6).search("").draw();
  }
});
$('#ESRB').change( function () {
    var selected = $('#ESRB option:selected').val();
    if (selected == "E"){
      var value = "^" + selected + "$"; // Use Regex for Exact Match of "E"
      dataTables.columns(12).search(value,true,false,true).draw();
    }else{ // Search as Normal
      dataTables.columns(12).search(selected,true,false,true).draw();
    }
});

function toggleOptions(styleOption, status){
  var colors ={
    good: null,
    bad: null,
    update: null,
    any: null,
  };
  var all;

  if (status){ // turn off Property if False
    switch (styleOption){
      case "backgroundColor": //Font Colors On
        colors.good = "#55ed57";
        colors.bad = "#ff7c8a";
        colors.update = "#f3f77b";
        colors.any = "#71f2fd";
        break;
      case "color":
        colors.good = "green";
        colors.bad = "red";
        colors.update = "#dad629";
        colors.any = "#000000";
        break;
    }
  }
  else{ // turning off a feature
    switch (styleOption){
      case "color":
        colors.good = "#000000";
        colors.bad = "#000000";
        colors.update = "#000000";
        colors.any = "#000000";
        break;
    }
  }
  all = document.getElementsByClassName('goodData');
  for (var i = 0; i < all.length; i++) {
    all[i].style[styleOption] = colors.good;
  }
  all = document.getElementsByClassName('badData');
  for (var i = 0; i < all.length; i++) {
    all[i].style[styleOption] = colors.bad;
  }
  all = document.getElementsByClassName('updateData');
  for (var i = 0; i < all.length; i++) {
    all[i].style[styleOption] = colors.update;
  }
  all = document.getElementsByClassName('anyData');
  for (var i = 0; i < all.length; i++) {
    all[i].style[styleOption] = colors.any;
  }
}


$('#colorize').on('click', function () {
  toggleOptions("backgroundColor", $("#colorize").prop('checked'));
});
$('#fontcolor').on('click', function () {
  toggleOptions("color", $("#fontcolor").prop('checked'));
});

</script>
  </br>
  </div> <!-- /container -->
      <div class="col-xs-12" style="background: linear-gradient(to top, #e7e7e7 0%,#f9f9f9 75%); padding: 2em;">
        <p>
          <strong>Release Date Change Log: </strong><em>(Note: This data is <strong>automated</strong> and therefore may not represent all changes.)</em>
        </p>
        <p id="changes" style="max-height: 300px; overflow-y: scroll;">
        </p>
      </div>
    <footer style="background-color: #989898; width: 100%; padding: 2em; color: #e2e2e2">
      Icons were from <em>© Noun Project Inc.</em> and have not been altered via their <a href="https://creativecommons.org/licenses/by/3.0/us/"> Creative Commons </a>      agreement. </br>
      All games and material are copyright of Nintendo Co., Ltd. and are used solely for helping others find and appreciate the
      software being developed!
    </footer>
</body>

</html>
